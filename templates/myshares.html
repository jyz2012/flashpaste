<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„åˆ†äº« - FlashPaste</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/theme.js"></script>
</head>
<body>
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" />
            <div class="slider"></div>
        </label>
        <em>åˆ‡æ¢æš—é»‘æ¨¡å¼</em>
    </div>
    <div style="text-align:center;">
        <h2>æˆ‘çš„åˆ†äº«</h2>
        <div style="margin-bottom:10px;"><a href="/">è¿”å›é¦–é¡µ</a></div>
        <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:16px;">
        {% for share in shares %}
            <div style="background:var(--form-bg);border:1px solid var(--input-border);border-radius:8px;box-shadow:0 2px 8px var(--form-shadow);padding:16px;width:300px;display:flex;flex-direction:column;">
                <div style="margin-bottom:8px;">
                    <a href="/s/{{ share.share_id }}" target="_blank" style="font-weight:bold;color:var(--link-color);text-decoration:none;">
                        {{ share.title }}
                    </a>
                    <span style="font-size:12px;color:var(--text-color);opacity:0.7;margin-left:8px;">
                        {% if share.status == 'å·²è¿‡æœŸ' %}
                            <span style="color:var(--error-color);">{{ share.status }}</span>
                        {% else %}
                            {{ share.status }}
                        {% endif %}
                    </span>
                </div>
                <div style="font-size:12px;color:var(--text-color);opacity:0.8;margin-bottom:8px;">
                    åˆ›å»ºæ—¶é—´: {{ share.created_at[:16] if share.created_at else 'æœªçŸ¥' }}
                </div>
                <div style="font-size:12px;color:var(--text-color);opacity:0.8;margin-bottom:8px;">
                    è®¿é—®æ¬¡æ•°: {{ share.view_count }}
                    {% if share.has_password %} | ğŸ”’ æœ‰å¯†ç {% endif %}
                    {% if share.is_burn %} | ğŸ”¥ é˜…åå³ç„š{% endif %}
                </div>
                {% if share.expires_at %}
                <div style="font-size:12px;color:var(--text-color);opacity:0.8;margin-bottom:8px;">
                    è¿‡æœŸæ—¶é—´: {{ share.expires_at[:16] }}
                </div>
                {% endif %}
                <div style="margin-top:auto;display:flex;gap:8px;">
                    <a href="/edit_share/{{ share.share_id }}" style="background:var(--button-bg);color:var(--button-text);padding:4px 8px;border-radius:4px;text-decoration:none;font-size:12px;">ç¼–è¾‘</a>
                    <button onclick="deleteShare('{{ share.share_id }}')" style="background:var(--error-color);color:white;padding:4px 8px;border:none;border-radius:4px;cursor:pointer;font-size:12px;">åˆ é™¤</button>
                </div>
            </div>
        {% else %}
            <div style="padding:24px;">æš‚æ— åˆ†äº«å†…å®¹ã€‚</div>
        {% endfor %}
        </div>
    
    <script>
    function deleteShare(shareId) {
        if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†äº«å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
            fetch('/delete_share/' + shareId, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('åˆ é™¤æˆåŠŸ');
                    location.reload();
                } else {
                    alert('åˆ é™¤å¤±è´¥: ' + data.message);
                }
            })
            .catch(error => {
                alert('åˆ é™¤å¤±è´¥: ' + error);
            });
        }
    }
    </script>
    </div>
</body>
</html>